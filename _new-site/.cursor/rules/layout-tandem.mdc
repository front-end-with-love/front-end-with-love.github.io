---
description: Верстка в тандеме: соглашения по разметке, стилям и ограничениям на основе анализа папки проектов
globs: "**/*.{vue,pug,sass,scss,css,html}"
alwaysApply: false
---

# Верстка в тандеме

Правило выведено из анализа проектов в `_projects`: Pug + SASS, homeplan, skin-das-lp8, parshkov, softline, hk и др. Соблюдать в текущем проекте то, что в нём уже выбрано; для новых решений — опираться на эти паттерны.

## Стек и синтаксис

- **Разметка:** в старых проектах — Pug; в текущем (astrology) — Vue SFC. Не подмешивать Pug в Vue-проект и наоборот без явного запроса.
- **Стили:** **Tailwind не используем** — не предлагать и не верстать на нём. В существующих проектах, где он уже есть, по возможности не усугублять зависимость. Вёрстка — на чистом CSS или препроцессоре по необходимости.
- **CSS vs препроцессор:** современный CSS (переменные, вложенность, container queries, gap, grid, clamp и т.д.) очень сильный. **SCSS/SASS — только когда есть веская причина** (миксины брейкпоинтов, сложная тема, легаси). Без причины не тянуть препроцессор; обычный CSS часто достаточно.
- **Форматирование:** 2 пробела, UTF-8, LF, final newline, trim trailing whitespace. Для Pug при наличии Prettier: singleQuote, без точек с запятой.

## BEM

- Классы: `.block`, элементы `&__element`, модификаторы `&--modifier`.
- **Vue — упрощённый BEM:** в Vue-компонентах блоком по смыслу является сам компонент (имя файла/компонента). **Префикс блока в классах не повторять.** Элементы: `logo-btn`, а не `header__logo-btn`; в стилях — `.logo-btn`, вложенно в корень. Модификаторы: `logo-btn--primary` или на корне `--compact`. Корень компонента — один класс, по смыслу блок (например `onboarding` или `card`), внутренние элементы без дублирования имени компонента.
- **Модификаторы:** придерживаться одного паттерна в проекте: либо только на блоке (`.block--modifier`), либо блок + элемент (`.block__element--modifier` или в Vue: `element--modifier`). Не смешивать оба стиля без причины.
- В разметке: корень блока с классом блока, дети — `__element` (или в Vue просто `element`). Не плодить лишние обёртки только ради одного класса.
- **Глубина селекторов:** не более 3 уровней. Цель — низкая специфичность.
- BEM для компонентных стилей; утилитарные классы при необходимости — свои, не Tailwind.

## Структура по блокам

- Один блок — одна зона ответственности: либо папка `block-name/` с `block-name.pug` + `block-name.sass`, либо `blocks/_block.sass` и включение в `main.sass`.
- Общее: `base/` или `_common/` — переменные (`_vars`, `variables/_breakpoints.sass`, `_colors.sass`), миксины (`_mixins.sass`), типографика, normalize, layout.
- **Порядок подключения в главном файле стилей:** (1) reset/normalize, (2) переменные и миксины, (3) типографика и базовый layout, (4) блоки/компоненты, (5) утилиты и переопределения. Не менять порядок без причины — от него зависит каскад и переопределение.

## Переменные и миксины

- Брейкпоинты: именованные переменные (`$width_sm`, `$width_md` или `$mobile`) и миксины (`+sm`, `+xs`, `@include breakpoint($mobile)`). Не вводить «магические» пиксели в медиа-запросах.
- Шрифты и цвета — из переменных (`$font`, `$accent`, `$color-gray`) в препроцессоре или из `:root` / CSS-переменных в чистом CSS.
- Адаптив: при наличии — использовать существующие fluid/`size()`/`calcFluidFontSize`; не дублировать логику.

## Ограничения

- **!important:** запрещён. Допустимо только в редких случаях с явным обоснованием в комментарии (например, переопределение сторонней библиотеки или утилита типа `.sr-only`). В обычной вёрстке решать конфликты через специфичность и порядок подключения.
- Не менять синтаксис стилей (CSS ↔ SASS ↔ SCSS) в проекте без явного указания.
- Не добавлять лишние обёртки (div/span) «для стилей» — сначала использовать существующие блоки и элементы.
- Не вводить новые глобальные классы/переменные, если можно опереться на уже объявленные в проекте.
- После изменений верстки — проверять в браузере (запуск, клик по изменённому сценарию), а не ограничиваться «должно работать».

## Возможности

- Предлагать вынос повторяющихся паттернов в миксины или компоненты.
- При применении стилей из Figma — переводить в существующие переменные/утилиты проекта, а не в «одноразовые» значения.
- Сохранять единый стиль именования (kebab-case для файлов и классов, BEM в разметке).
